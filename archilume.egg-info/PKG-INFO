Metadata-Version: 2.4
Name: archilume
Version: 0.1.0
Summary: Add your description here
Requires-Python: >=3.12
Description-Content-Type: text/markdown
Requires-Dist: ifcopenshell>=0.8.3.post1
Requires-Dist: numpy>=2.3.2
Requires-Dist: open3d>=0.19.0
Requires-Dist: opencv-python>=4.11.0.86
Requires-Dist: openpyxl>=3.1.5
Requires-Dist: pandas>=2.3.1
Requires-Dist: pillow>=11.3.0
Requires-Dist: pyradiance>=1.1.5
Requires-Dist: pyvista>=0.46.4

# Archilume

[![Python](https://img.shields.io/badge/python-3.12+-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

> A Python library for Radiance-based daylight analysis, providing streamlined tools for architectural lighting simulation and environmental performance assessment.

## Features

- **3D Model Conversion** - Convert OBJ/MTL building models to Radiance octree format with automatic material processing
- **Sky Generation** - Create physically accurate sky models for any date, time, and geographic location
- **View Setup** - Generate camera view parameters for interior and exterior analysis
- **Image Processing** - Advanced rendering pipelines with automated post-processing capabilities
- **Parallel Execution** - Multi-core processing support for computationally intensive simulations
- **Seasonal Analysis** - Pre-configured workflows for solstice studies and annual daylight assessments

## Limitations

⚠️ **This repository is not appropriate for use with large buildings containing many curved surfaces.** The current implementation is optimized for smaller to medium-sized buildings with primarily planar geometry. Complex curved geometries may result in:
- Excessive computation times
- High memory usage
- Reduced accuracy in mesh conversion and rendering

For projects with extensive curved surfaces or very large building models, consider using specialized Radiance workflows or simplified geometric representations.

## Quick Start

### Prerequisites

- **Python 3.12+** - [Download Python](https://www.python.org/downloads/)
- **Radiance** - [Install Radiance](https://www.radiance-online.org/)

**Windows Users**: Radiance must be installed to `C:\Radiance\bin\`. If you encounter "Warning! PATH too long" during installation, manually set environment variables:

```cmd
setx PATH "%PATH%;C:\Radiance\bin"
setx RAYPATH "C:\Radiance\lib"
```

### Installation

```bash
# Clone the repository
git clone https://github.com/vincentlogarzo/archilume.git
cd archilume

# Install in development mode
pip install -e .

# Optional: Install with development tools
pip install -e ".[dev]"
```

### Basic Usage

```python
from archilume.obj_to_octree import ObjToOctree
from archilume.sky_generator import SkyGenerator

# Convert 3D model to Radiance format
octree = ObjToOctree(['building.obj'], ['building.mtl'])
octree.create_skyless_octree_for_sunlight_analysis()

# Generate sky files for analysis
sky_gen = SkyGenerator(lat=-37.8136)  # Melbourne
sky_gen.generate_sunny_sky_series(
    month=6, day=21,  # Winter solstice
    start_hour_24hr_format=9,
    end_hour_24hr_format=17
)
```

## Project Structure

```
archilume/
├── archilume/                       # Core package
│   ├── obj_to_octree.py            # 3D model → Radiance conversion
│   ├── sky_generator.py            # Sky condition generation
│   ├── view_generator.py           # Camera view setup
│   ├── rendering_pipelines.py      # Rendering workflows
│   ├── image_processor.py          # Post-processing utilities
│   ├── geometry_utils.py           # Geometric calculations
│   └── utils.py                    # Helper functions & parallel processing
│
├── examples/                        # Example workflows
│   ├── sunlight_exposure_analysis.py
│   └── summer_solstice_solar_gains.py
│
├── tests/                           # Test suite
│
└── intermediates/                   # Generated files (gitignored)
    ├── octrees/                    # Radiance scene files
    ├── sky/                        # Sky condition files
    └── views/                      # Camera parameters
```

## API Reference

### ObjToOctree

Converts 3D building models from OBJ format to Radiance octree format.

```python
from archilume.obj_to_octree import ObjToOctree

octree_generator = ObjToOctree(
    obj_file_paths=['building.obj'],
    mtl_file_paths=['building.mtl']
)
octree_generator.create_skyless_octree_for_sunlight_analysis()
```

### SkyGenerator

Generates Radiance sky files for specific dates, times, and geographic locations.

```python
from archilume.sky_generator import SkyGenerator

sky_generator = SkyGenerator(lat=-37.8136)  # Latitude in decimal degrees

sky_generator.generate_sunny_sky_series(
    month=6, day=21,                    # Date for analysis
    start_hour_24hr_format=9,           # Start time (24hr)
    end_hour_24hr_format=17,            # End time (24hr)
    minute_increment=60                 # Time step (default: 5 minutes)
)
```

### ViewGenerator

Creates view parameter files for rendering analysis points.

```python
from archilume.view_generator import ViewGenerator

view_generator = ViewGenerator(
    room_boundaries_csv_path='rooms.csv',
    output_dir='intermediates/views'
)
view_generator.create_aoi_and_view_files()
```

## Examples

See the [examples](examples/) directory for complete workflows:

- **[sunlight_exposure_analysis.py](examples/sunlight_exposure_analysis.py)** - Comprehensive sunlight analysis with hourly sky generation
- **[summer_solstice_solar_gains.py](examples/summer_solstice_solar_gains.py)** - Solar heat gain calculations for peak summer conditions

### Basic Workflow

```python
from archilume.obj_to_octree import ObjToOctree
from archilume.sky_generator import SkyGenerator
from archilume.view_generator import ViewGenerator

# 1. Convert building geometry
octree = ObjToOctree(['building.obj'], ['building.mtl'])
octree.create_skyless_octree_for_sunlight_analysis()

# 2. Generate sky conditions (Melbourne, winter solstice)
sky = SkyGenerator(lat=-37.8136)
sky.generate_sunny_sky_series(
    month=6, day=21,
    start_hour_24hr_format=9,
    end_hour_24hr_format=17,
    minute_increment=60
)

# 3. Create analysis views
views = ViewGenerator(
    room_boundaries_csv_path='rooms.csv',
    output_dir='intermediates/views'
)
views.create_aoi_and_view_files()
```

## Testing

```bash
# Install development dependencies
pip install -e ".[dev]"

# Run tests
pytest tests/

# Run with coverage
coverage run -m pytest tests/
coverage report
```

## Dependencies

Archilume requires the following Python packages (automatically installed):

- [pyradiance](https://github.com/LBNL-ETA/pyradiance) ≥1.1.5 - Python interface to Radiance
- [open3d](https://open3d.org/) ≥0.19.0 - 3D data processing
- [opencv-python](https://opencv.org/) ≥4.11.0 - Computer vision and image processing
- [ifcopenshell](https://ifcopenshell.org/) ≥0.8.3 - IFC/BIM file support
- [numpy](https://numpy.org/) ≥2.3.2 - Numerical computing
- [pandas](https://pandas.pydata.org/) ≥2.3.1 - Data manipulation
- [pillow](https://pillow.readthedocs.io/) ≥11.3.0 - Image processing

## Contributing

Contributions are welcome! Please follow these steps:

1. Fork the repository
2. Create a feature branch: `git checkout -b feature/your-feature`
3. Make your changes and add tests
4. Run the test suite: `pytest tests/`
5. Commit your changes: `git commit -m 'Add new feature'`
6. Push to your branch: `git push origin feature/your-feature`
7. Open a Pull Request

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Acknowledgments

- Built on [Radiance](https://www.radiance-online.org/), the industry-standard lighting simulation software
- Uses [PyRadiance](https://github.com/LBNL-ETA/pyradiance) for Python-Radiance integration
- Special thanks to [@MrBlenny](https://github.com/MrBlenny) for bringing life to a sick project.

## Support

- **Issues**: Report bugs or request features via [GitHub Issues](https://github.com/vincentlogarzo/archilume/issues)
- **Examples**: See the [examples](examples/) directory for usage patterns
- **Documentation**: Explore the codebase and docstrings for detailed API information

---

**Archilume** - Streamlined architectural lighting analysis with Radiance
